{"version":3,"sources":["../lib/LoggerBuilder.ts"],"names":["LoggerBuilder","constructor","factory","context","setApp","appId","app","setUid","uid","detectUser","user","build"],"mappings":";;;;;;;AAAA;;AAIO,MAAMA,aAAN,CAAoB;AAMvBC,EAAAA,WAAW,CAACC,OAAD,EAA0B;AACjC,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKD,OAAL,GAAeA,OAAf;AACH;;AAEDE,EAAAA,MAAM,CAACC,KAAD,EAA+B;AACjC,SAAKF,OAAL,CAAaG,GAAb,GAAmBD,KAAnB;AACA,WAAO,IAAP;AACH;;AAEDE,EAAAA,MAAM,CAACC,GAAD,EAA6B;AAC/B,SAAKL,OAAL,CAAaK,GAAb,GAAmBA,GAAnB;AACA,WAAO,IAAP;AACH;;AAEDC,EAAAA,UAAU,GAAkB;AACxB,UAAMC,IAAI,GAAG,2BAAb;;AACA,QAAIA,IAAI,KAAK,IAAb,EAAmB;AACf,WAAKP,OAAL,CAAaK,GAAb,GAAmBE,IAAI,CAACF,GAAxB;AACH;;AAED,WAAO,IAAP;AACH;;AAEDG,EAAAA,KAAK,GAAY;AACb,WAAO,KAAKT,OAAL,CAAa,KAAKC,OAAlB,CAAP;AACH;;AAhCsB","sourcesContent":["import { getCurrentUser } from '@nextcloud/auth'\n\nimport { ILogger, ILoggerFactory } from './contracts'\n\nexport class LoggerBuilder {\n\n    private context: any\n\n    private factory: ILoggerFactory\n\n    constructor(factory: ILoggerFactory) {\n        this.context = {}\n        this.factory = factory\n    }\n\n    setApp(appId: string): LoggerBuilder {\n        this.context.app = appId\n        return this\n    }\n\n    setUid(uid: string): LoggerBuilder {\n        this.context.uid = uid\n        return this\n    }\n\n    detectUser(): LoggerBuilder {\n        const user = getCurrentUser()\n        if (user !== null) {\n            this.context.uid = user.uid\n        }\n\n        return this\n    }\n\n    build(): ILogger {\n        return this.factory(this.context)\n    }\n\n}\n"],"file":"LoggerBuilder.js"}